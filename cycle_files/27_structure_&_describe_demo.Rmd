---
title: 'Работа с данными: до регрессии'
output: html_document
---

```{r set-options, message=FALSE, warning=FALSE}
library("knitr")
library("ggplot2") # графики
library("broom") # стандартизация информации о модели и описательные статистики
library("car")
library("psych")
library("Hmisc")
library("reporttools") # latex-таблички для описательных статистик
library("xtable")
library("stargazer")
library("tables")

options(width = 120)
opts_chunk$set(message=FALSE, warning=FALSE)
```

Данные, удобные для обработки, традиционно имеют тип data frame. Однако просто создание такого набора мало --- зачастую для создания хорошей модели необходимо, во-первых, разумно структурировать данные, во-вторых --- извлечь информацию о самих данных.

## Структурирование данных

Данные не только не всегда находятся в нужном формате, но даже и находящиеся в нужном формате почти всегда стоит преобразовывать. В этом исследователю помогают множество инструментов, реализованных в R. В частности, пакет `tidyr`, а также способы, описанные в (Hadley Wickham `Tidy Data`) &

Далее изложены наиболее часто применяемые элементы структурирования данных, составленные на основе указанных источников и реализованные в том числе с помощью пакета `tidyr`.

#### понятие о tidy data

#### примеры применения основных функций tidyr (и о чём в какой статье можно найти?)

Для начала можем обратиться к описательным статистикам, которые можем извлечь с помощью целого ряда команд. 

## Данные о данных

* Описательные статистики
* Диаграммы
* Больше диаграмм

#### Описательные статистики

Совсем краткую информацию о наборе данных можно получить с помощью функции `glance` из пакета `broom`:
```{r}
glance(States)
```

Различные описательные статистики можно получить несколькими способами. Например, функцией `tidy` из того же пакета, функцией `describe` из пакета `psych` или пакета `Hmisc` и другими. 

```{r}
# Заметим, что раз функция describe есть в двух пакетах, R выбирает ту, пакет которой был 
# загружен последним, т. е., в данном случае, Hmisc Но describe из psych всё равно можно 
# использовать:


psych::describe(States)
#psych.table <- psych::describe(States)
#kable(psych.table)
```

Множество пакетов позволяют создавать latex-таблички с описательными статистиками, например, `tables`, `reporttools`, `stargazer` и др. 

```{r, eval = FALSE}
# заменить на пример с tables и перетехать

data("heart", package = "survival")  # load the jasa dataset
vars0 <- with(jasa, data.frame(Transplantation = factor(jasa$transplant, 
    levels = 0:1, labels = c("no", "yes")), Age = jasa$age, Surgery = factor(jasa$surgery, 
    levels = 0:1, labels = c("no", "yes")), `Survival status` = factor(jasa$fustat, 
    levels = 0:1, labels = c("alive", "dead")), `HLA A2 score` = jasa$hla.a2, 
    Birthday = jasa$birth.dt, `Acceptance into program` = jasa$accept.dt, 
    `End of follow up` = jasa$fu.date, `Follow up time` = futime, `Mismatch score` = mscore, 
    check.names = FALSE))

attach(vars0, warn.conflicts = FALSE)

vars1 <- vars0[, c("Surgery", "Survival status", "HLA A2 score")]
cap1 <- "Patient characteristics: nominal variables."
tableNominal(vars = vars1, cap = cap1, vertical = FALSE, lab = "tab: nominal1", 
    longtable = FALSE) 

```




##### Sourse:

Hadley Wickham `Tidy Data`

tidyr description
